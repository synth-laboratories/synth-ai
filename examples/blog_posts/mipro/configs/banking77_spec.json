{
  "metadata": {
    "id": "spec.banking77.v1",
    "title": "Banking77 Intent Classification Specification",
    "version": "1.0.0",
    "owner": "prompt-learning@synth.ai",
    "created_at": "2025-11-06",
    "updated_at": "2025-11-06",
    "imports": [],
    "scope": "banking-intent-classification",
    "description": "System specification for classifying customer banking queries into 77 intent categories. Defines principles, disambiguation rules, and edge case handling for accurate intent classification."
  },
  "principles": [
    {
      "id": "P-clarity",
      "text": "Prioritize immediate-action intents over informational queries when multiple interpretations are possible.",
      "rationale": "Customers with urgent issues (lost cards, failed transactions) need immediate assistance."
    },
    {
      "id": "P-specificity",
      "text": "Choose more specific intent categories over general ones when both are plausible.",
      "rationale": "Specific categories enable more targeted responses and better customer experience."
    },
    {
      "id": "P-terminology",
      "text": "Preserve customer terminology and context when classifying intent.",
      "rationale": "Customer language patterns provide critical disambiguation signals."
    }
  ],
  "rules": [
    {
      "id": "R-card-disambiguation",
      "title": "Disambiguate card arrival vs. card payment issues",
      "rationale": "Queries mentioning 'card' can refer to physical card delivery or payment problems. Keywords provide disambiguation.",
      "priority": 9,
      "constraints": {
        "must": [
          "Classify as 'lost_or_stolen_card' or 'card_not_working' if payment-related keywords are present (charge, declined, transaction, payment)",
          "Classify as 'card_arrival' or 'card_delivery_estimate' if delivery-related keywords are present (waiting, hasn't arrived, shipped, tracking)"
        ],
        "must_not": [
          "Assume 'card' always refers to physical delivery",
          "Ignore urgency indicators like 'immediately', 'ASAP', 'urgent'"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "My card was declined at the store",
          "response": "declined_card_payment",
          "description": "Payment keyword (declined) indicates payment issue, not delivery"
        },
        {
          "kind": "good",
          "prompt": "I am still waiting on my card",
          "response": "card_arrival",
          "description": "Delivery keyword (waiting) indicates delivery issue"
        },
        {
          "kind": "bad",
          "prompt": "My card isn't working",
          "response": "card_arrival",
          "description": "WRONG: 'isn't working' suggests payment issue, should be card_not_working"
        }
      ]
    },
    {
      "id": "R-balance-transfer",
      "title": "Balance not updated scenarios",
      "rationale": "Balance queries require disambiguation between bank transfers vs. cheque/cash deposits.",
      "priority": 8,
      "constraints": {
        "must": [
          "Classify as 'balance_not_updated_after_bank_transfer' when both 'balance' and 'transfer' keywords appear",
          "Classify as 'balance_not_updated_after_cheque_or_cash_deposit' when balance query mentions cheque, cash, or deposit"
        ],
        "should": [
          "Look for payment method indicators (wire, ACH, deposit, cheque, cash)"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "My balance is still wrong after I made a transfer",
          "response": "balance_not_updated_after_bank_transfer",
          "description": "Both balance and transfer present"
        },
        {
          "kind": "good",
          "prompt": "I deposited cash but my balance hasn't changed",
          "response": "balance_not_updated_after_cheque_or_cash_deposit",
          "description": "Cash deposit mentioned"
        }
      ]
    },
    {
      "id": "R-atm-operations",
      "title": "ATM-related queries",
      "rationale": "ATM queries can involve fees, support, or withdrawal issues.",
      "priority": 7,
      "constraints": {
        "must": [
          "Classify as 'cash_withdrawal_charge' or 'atm_support' based on whether fees or technical issues are mentioned"
        ],
        "should": [
          "Look for fee-related keywords (charge, fee, cost) vs. technical keywords (not working, declined, error)"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "Why was I charged for getting cash?",
          "response": "cash_withdrawal_charge",
          "description": "Fee-related query"
        },
        {
          "kind": "good",
          "prompt": "The ATM didn't give me my money",
          "response": "atm_support",
          "description": "Technical issue with ATM"
        }
      ]
    },
    {
      "id": "R-top-up-methods",
      "title": "Top-up method disambiguation",
      "rationale": "Top-up queries vary by payment method (card, cash, cheque, bank transfer).",
      "priority": 7,
      "constraints": {
        "must": [
          "Classify as 'top_up_by_cash_or_cheque' when cash or cheque is mentioned",
          "Classify as 'top_up_by_card_charge' when card payment is mentioned",
          "Classify as 'top_up_by_bank_transfer_charge' when bank transfer is mentioned"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "Can I top up with cash?",
          "response": "top_up_by_cash_or_cheque",
          "description": "Cash method specified"
        },
        {
          "kind": "good",
          "prompt": "How do I add money via bank transfer?",
          "response": "top_up_by_bank_transfer_charge",
          "description": "Bank transfer method specified"
        }
      ]
    },
    {
      "id": "R-urgency-signals",
      "title": "Handle urgency signals",
      "rationale": "Urgent queries (lost cards, fraud) require immediate categorization for fast response.",
      "priority": 10,
      "constraints": {
        "must": [
          "Prioritize lost_or_stolen_card when urgency keywords appear with card mentions",
          "Prioritize compromised_card when fraud or security keywords appear"
        ],
        "should": [
          "Recognize urgency indicators: immediately, ASAP, urgent, emergency, help, stolen, lost, fraud"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "URGENT: My card was stolen",
          "response": "lost_or_stolen_card",
          "description": "Urgency + stolen keyword"
        },
        {
          "kind": "good",
          "prompt": "I think someone is using my card",
          "response": "compromised_card",
          "description": "Security/fraud concern"
        }
      ]
    },
    {
      "id": "R-failed-transactions",
      "title": "Transaction failure disambiguation",
      "rationale": "Failed transactions can be transfers, card payments, or other payment types.",
      "priority": 8,
      "constraints": {
        "must": [
          "Classify as 'declined_transfer' when transfer keyword is present with failure indicator",
          "Classify as 'declined_card_payment' when card payment keyword is present with failure indicator",
          "Classify as 'declined_cash_withdrawal' when ATM/cash withdrawal mentioned with failure"
        ],
        "should": [
          "Look for failure keywords: declined, failed, rejected, didn't work, couldn't complete"
        ]
      },
      "examples": [
        {
          "kind": "good",
          "prompt": "My transfer didn't work",
          "response": "declined_transfer",
          "description": "Transfer + failure indicator"
        },
        {
          "kind": "good",
          "prompt": "My card was declined at the store",
          "response": "declined_card_payment",
          "description": "Card payment + declined"
        }
      ]
    }
  ],
  "interfaces": {
    "io_modes": ["tool_calling"],
    "capabilities": ["intent_classification"],
    "constraints": {
      "output_format": "tool_call",
      "tool_name": "banking77_classify",
      "num_intents": 77
    }
  },
  "glossary": [
    {
      "term": "intent",
      "definition": "The underlying goal or purpose of a customer query",
      "aliases": ["category", "classification"]
    },
    {
      "term": "disambiguate",
      "definition": "To distinguish between multiple plausible interpretations using contextual keywords",
      "aliases": ["clarify", "distinguish"]
    },
    {
      "term": "urgency indicator",
      "definition": "Keywords signaling time-sensitive issues requiring immediate action",
      "aliases": ["urgent keyword", "priority signal"]
    }
  ],
  "changelog": [
    {
      "version": "1.0.0",
      "date": "2025-11-06",
      "changes": [
        "Initial specification with 7 core rules",
        "Added principles for clarity, specificity, and terminology preservation",
        "Defined disambiguation rules for cards, balance, ATM, top-up, urgency, and transactions"
      ]
    }
  ]
}

