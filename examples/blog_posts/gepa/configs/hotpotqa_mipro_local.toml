# MIPROv2 Prompt Learning for HotpotQA
# Local backend configuration targeting the HotpotQA task app.

[prompt_learning]
algorithm = "mipro"
task_app_url = "http://127.0.0.1:8110"
task_app_id = "hotpotqa"

# Seeds used during online optimisation
evaluation_seeds = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

# Held-out seeds for the final sweep
test_pool = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19]

[prompt_learning.initial_prompt]
id = "hotpotqa_chain"
name = "HotpotQA Multi-Hop Reasoning"

[[prompt_learning.initial_prompt.messages]]
role = "system"
pattern = "You are a research assistant that answers multi-hop questions. Read the supporting passages carefully and articulate the final answer plus a short justification. Use the format:\nAnswer: ...\nSupport: ..."
order = 0

[[prompt_learning.initial_prompt.messages]]
role = "user"
pattern = "Question: {question}\n\nPassages:\n{context}\n\nProvide the final answer and cite the supporting facts."
order = 1

[prompt_learning.initial_prompt.wildcards]
question = "REQUIRED"
context = "REQUIRED"

[prompt_learning.policy]
model = "openai/gpt-oss-20b"
provider = "groq"
inference_url = "https://api.groq.com/openai/v1"
temperature = 0.0
max_completion_tokens = 512
policy_name = "hotpotqa-mipro"

[prompt_learning.mipro]
env_name = "hotpotqa"
num_iterations = 20
num_evaluations_per_iteration = 8
batch_size = 8
max_concurrent = 16
meta_model = "gpt-4.1-mini"
meta_model_provider = "openai"
meta_model_inference_url = "https://api.openai.com/v1"
few_shot_score_threshold = 0.75
test_pool = [20, 21, 22, 23, 24]
bootstrap_train_seeds = [0, 1, 2, 3, 4]
online_pool = [5, 6, 7, 8, 9]
