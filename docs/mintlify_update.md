### Mintlify Documentation Update Plan for `synth_ai` OSS codebase

> These are implementation notes â€“ **not** final docs.  Use them as a punch-list while we revamp the docs site.

---

## 1  Current Mintlify setup

- Root docs live in `mintlify-docs/`
- `mint.json` already defines:
  - Brand (logo, colours, top-bar links)
  - Tabs for **Python SDK** / **TypeScript SDK**
  - Navigation groups & pages for SDK-specific reference, guides and releases.
- Content folders:
  - `python-sdk/` & `typescript-sdk/` already contain autogenerated MDX pages for the respective client libraries.
  - General getting-started (`introduction.mdx`, `quickstart.mdx`) and changelog pages.

**Gap:** There is *no* documentation for the **core OSS repo (`synth_ai/â€¦`)** â€“ tracing system, environments service, LM wrappers, etc.

---

## 2  High-level documentation strategy

Most teams combine three layers of docs:

1. **Narrative / Conceptual guides**  â€“ high-level concepts, architecture, onboarding.
2. **Task-oriented guides**  â€“ how-to recipes, tutorials, example notebooks.
3. **API reference**  â€“ autogenerated from source (docstrings / TSdoc) and kept in sync with releases.

We'll mirror that using Mintlify's content types:

| Layer | Mintlify artefact | Source | Generation strategy |
|-------|------------------|--------|---------------------|
| Conceptual | Hand-written `.mdx` pages under `synth-ai/overview/` (new group) | human-authored | Write once, update manually |
| Guides / Tutorials | `.mdx` with live code blocks + links to examples | start from existing notebooks & example scripts | Manual + copy-code snippets |
| API reference | Autogenerated `.mdx` under `synth-ai/api/â€¦` | Python docstrings / Pydantic models / TSdoc | Use `mintlify python` cli (see below) |

---

## 3  Proposed Mintlify Information Architecture

Add a **new top-level tab** in `mint.json`:

```json
{
  "name": "Synth-AI OSS",
  "url": "synth-ai"
}
```

Navigation groups inside that tab:

1. **Overview**
   - what-is-synth-ai
   - architecture
   - quick-start
2. **Core Concepts**
   - Sessions & Timesteps
   - Tracing Events & Messages
   - LM Abstractions
   - Environment Service
3. **Guides**
   - Tracing your own agent
   - Writing custom Environment hooks
   - Uploading data to DuckDB / LangFuse
   - Deploying the Crafter evaluation service
4. **API Reference** *(autogenerated)*
   - `synth_ai.tracing_v2.*`
   - `synth_ai.environments.*`
   - `synth_ai.lm.*`
5. **Changelog** *(reuse existing)*

---

## 4  Generating API reference

### 4.1 Mintlify Python CLI Status

**UPDATE:** The `mintlify python` command does **NOT** exist in the current CLI (v1.0.0). The available commands are:
- `mintlify dev` - Run local dev server
- `mintlify openapi-check` - Validate OpenAPI specs  
- `mintlify broken-links` - Check for broken links
- `mintlify rename` - Rename files and update links

**Alternative approaches for API reference generation:**

#### Option A: Use existing Python doc generators
```bash
# Sphinx (most common)
pip install sphinx sphinx-rtd-theme
sphinx-quickstart
# Configure conf.py to output markdown/mdx

# pydoc-markdown (simpler)
pip install pydoc-markdown
pydoc-markdown --output-dir mintlify-docs/synth-ai/api synth_ai.tracing_v2
```

#### Option B: Custom script using inspect module
```python
import inspect
import ast
from pathlib import Path

def extract_docstrings(module_path: str) -> dict:
    """Extract all public functions/classes with docstrings."""
    # Parse AST, find functions/classes with docstrings
    # Return structured data for MDX generation
```

#### Option C: Use existing Mintlify patterns
- Look at how `python-sdk/` pages are currently generated
- They may use a different tool or manual process

### 4.2 Current Docstring Analysis

**Good examples found:**

```python
def start_timestep(self, step_id: Optional[str] = None, **metadata) -> SessionTimeStep:
    """Start a new timestep in the current session."""
    # Implementation...

def insert_session_trace(self, trace):
    """Insert a complete session trace into DuckDB."""
    # Implementation...

class SessionTracer:
    """Main class for tracing LLM interactions in sessions."""
    # Implementation...
```

**Areas needing improvement:**

1. **Missing docstrings** - Many methods have no docstrings at all
2. **Inconsistent formats** - Mix of Google-style, NumPy-style, and plain text
3. **Missing type hints** - Some functions lack proper type annotations
4. **No Args/Returns sections** - Most docstrings are single-line descriptions

### 4.3 Recommended Docstring Standards

**For functions/methods:**
```python
def function_name(self, param1: str, param2: Optional[int] = None) -> bool:
    """Brief description of what the function does.
    
    Longer description if needed, explaining the purpose, behavior,
    and any important implementation details.
    
    Args:
        param1: Description of first parameter
        param2: Description of optional parameter
        
    Returns:
        Description of return value
        
    Raises:
        ValueError: When param1 is invalid
        RuntimeError: When operation fails
        
    Example:
        >>> function_name("test", 42)
        True
    """
```

**For classes:**
```python
class ClassName:
    """Brief description of the class.
    
    Longer description explaining the class purpose, key methods,
    and typical usage patterns.
    
    Attributes:
        attr1: Description of attribute
        attr2: Description of another attribute
        
    Example:
        >>> obj = ClassName()
        >>> obj.method()
    """
```

---

## 5  Proposed Workflow: Auto-generated docs in `synth-ai/docs/`

### 5.1 Directory Structure

```
synth-ai/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ api/                    # Auto-generated API reference
â”‚   â”‚   â”œâ”€â”€ tracing_v2/         # Generated from synth_ai.tracing_v2
â”‚   â”‚   â”œâ”€â”€ environments/       # Generated from synth_ai.environments  
â”‚   â”‚   â””â”€â”€ lm/                # Generated from synth_ai.lm
â”‚   â”œâ”€â”€ concepts/               # Manual conceptual docs
â”‚   â”œâ”€â”€ guides/                 # Manual tutorials
â”‚   â””â”€â”€ mintlify_update.md      # This planning doc
â”œâ”€â”€ dev/
â”‚   â”œâ”€â”€ sync_docs.sh           # Script to sync docs to mintlify-docs/
â”‚   â””â”€â”€ generate_api_docs.py   # Script to generate API docs
â””â”€â”€ synth_ai/                  # Source code
```

### 5.2 Generation Script (`dev/generate_api_docs.py`)

```python
#!/usr/bin/env python3
"""Generate API documentation from synth_ai source code."""

import subprocess
import sys
from pathlib import Path

def generate_api_docs():
    """Generate API docs using pydoc-markdown."""
    docs_dir = Path(__file__).parent.parent / "docs"
    api_dir = docs_dir / "api"
    
    # Install pydoc-markdown if not available
    try:
        import pydoc_markdown
    except ImportError:
        subprocess.run([sys.executable, "-m", "pip", "install", "pydoc-markdown"])
    
    # Generate docs for each module
    modules = [
        "synth_ai.tracing_v2",
        "synth_ai.environments", 
        "synth_ai.lm"
    ]
    
    for module in modules:
        output_dir = api_dir / module.split(".")[-1]
        output_dir.mkdir(parents=True, exist_ok=True)
        
        cmd = [
            sys.executable, "-m", "pydoc_markdown",
            "--output-dir", str(output_dir),
            module
        ]
        
        print(f"Generating docs for {module}...")
        subprocess.run(cmd, check=True)
        print(f"âœ… Generated docs in {output_dir}")

if __name__ == "__main__":
    generate_api_docs()
```

### 5.3 Sync Script (`dev/sync_docs.sh`)

```bash
#!/bin/bash
# Sync generated docs from synth-ai/docs/ to mintlify-docs/synth-ai/

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Paths
SYNTH_AI_DOCS="../synth-ai/docs"
MINTLIFY_DOCS="synth-ai"

echo -e "${YELLOW}ğŸ”„ Syncing docs from synth-ai/docs/ to mintlify-docs/${MINTLIFY_DOCS}/${NC}"

# Check if source directory exists
if [ ! -d "$SYNTH_AI_DOCS" ]; then
    echo -e "${RED}âŒ Source directory $SYNTH_AI_DOCS not found${NC}"
    exit 1
fi

# Create destination directory
mkdir -p "$MINTLIFY_DOCS"

# Sync API docs
if [ -d "$SYNTH_AI_DOCS/api" ]; then
    echo -e "${GREEN}ğŸ“ Syncing API docs...${NC}"
    rsync -av --delete "$SYNTH_AI_DOCS/api/" "$MINTLIFY_DOCS/api/"
fi

# Sync concept docs  
if [ -d "$SYNTH_AI_DOCS/concepts" ]; then
    echo -e "${GREEN}ğŸ“ Syncing concept docs...${NC}"
    rsync -av --delete "$SYNTH_AI_DOCS/concepts/" "$MINTLIFY_DOCS/concepts/"
fi

# Sync guide docs
if [ -d "$SYNTH_AI_DOCS/guides" ]; then
    echo -e "${GREEN}ğŸ“ Syncing guide docs...${NC}"
    rsync -av --delete "$SYNTH_AI_DOCS/guides/" "$MINTLIFY_DOCS/guides/"
fi

echo -e "${GREEN}âœ… Docs synced successfully!${NC}"
echo -e "${YELLOW}ğŸ’¡ Run 'npm run dev' in mintlify-docs/ to preview changes${NC}"
```

### 5.4 Usage Workflow

1. **Generate API docs:**
   ```bash
   cd synth-ai/
   python dev/generate_api_docs.py
   ```

2. **Sync to Mintlify:**
   ```bash
   cd mintlify-docs/
   ./../synth-ai/dev/sync_docs.sh
   ```

3. **Preview changes:**
   ```bash
   npm run dev
   ```

### 5.5 Benefits of this approach

- **Separation of concerns** - Docs generation happens in the source repo
- **Version control** - Generated docs are tracked with the source code
- **CI/CD friendly** - Can run generation in GitHub Actions
- **Easy rollback** - Can revert docs changes with code changes
- **Local development** - Developers can generate docs locally for testing

---

## 6  Action items (checklist)

- [ ] **Research existing API generation** - Check how `python-sdk/` pages are currently generated
- [ ] **Choose doc generation tool** - Sphinx, pydoc-markdown, or custom script
- [ ] **Improve docstrings** - Add proper docstrings to all public APIs in:
  - `synth_ai.tracing_v2.*` (priority)
  - `synth_ai.environments.*` 
  - `synth_ai.lm.*`
- [ ] **Add `__all__` exports** - Control what gets documented in each module
- [ ] **Create generation script** - `dev/generate_api_docs.py`
- [ ] **Create sync script** - `dev/sync_docs.sh`
- [ ] **Extend `mint.json`** - Add new **Synth-AI OSS** tab and navigation groups
- [ ] **Create skeleton MDX pages** - Manual pages for concepts and guides
- [ ] **Set up CI generation** - Automate API docs refresh on releases
- [ ] **Write tutorials** - 1-2 end-to-end examples

---

## 7  References / Examples

- **Sphinx docs:** https://www.sphinx-doc.org/en/master/
- **pydoc-markdown:** https://github.com/NiklasRosenstein/pydoc-markdown
- **Google Python Style Guide:** https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings
- **NumPy docstring guide:** https://numpydoc.readthedocs.io/en/latest/format.html

---

**Next step:** Create the generation and sync scripts, then test with a small module.
