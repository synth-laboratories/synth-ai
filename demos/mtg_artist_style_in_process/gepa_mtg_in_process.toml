# In-process GEPA config for MTG artist style matching (text-only)

[prompt_learning]
algorithm = "gepa"
task_app_id = "mtg_artist_style_in_process"
task_app_url = "http://127.0.0.1:8114"

[prompt_learning.initial_prompt]
id = "mtg_style_prompt"
name = "MTG Style Prompt (In-Process)"

[[prompt_learning.initial_prompt.messages]]
role = "system"
order = 0
pattern = """You are a creative prompt writer. Produce a compact art-direction prompt that matches the requested MTG artist style."""

[[prompt_learning.initial_prompt.messages]]
role = "user"
order = 1
pattern = """Card name: {card_name}
Card description: {card_description}
Target artist style: {target_artist_style}
Customer style note: {customer_style_note}

Return a single paragraph prompt. Do NOT mention the artist name directly."""

[prompt_learning.initial_prompt.wildcards]
card_name = "REQUIRED"
card_description = "REQUIRED"
target_artist_style = "REQUIRED"
customer_style_note = "REQUIRED"

[prompt_learning.policy]
model = "gpt-5-nano"
provider = "openai"
inference_mode = "synth_hosted"
temperature = 0.2
max_completion_tokens = 256

[prompt_learning.env_config]
artist_key = "seb_mckinnon"
max_examples = 6
customer_style_note = "Emphasize moody lighting, textured brushwork, and gothic silhouettes."

[prompt_learning.gepa]
env_name = "mtg_artist_style_in_process"

[prompt_learning.gepa.rollout]
budget = 6
max_concurrent = 1
minibatch_size = 1

[prompt_learning.gepa.evaluation]
seeds = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
validation_seeds = [13, 14]

[prompt_learning.gepa.population]
initial_size = 2
num_generations = 1
children_per_generation = 1

[prompt_learning.gepa.mutation]
rate = 0.3

[prompt_learning.gepa.archive]
pareto_set_size = 10

[eval]
app_id = "mtg_artist_style_in_process"
task_app_url = "http://127.0.0.1:8114"
env_name = "mtg_artist_style_in_process"
seeds = [0, 1, 2]
concurrency = 1
timeout = 120.0
env_config = { artist_key = "seb_mckinnon", max_examples = 6, customer_style_note = "Emphasize moody lighting, textured brushwork, and gothic silhouettes." }

[eval.policy_config]
model = "gpt-5-nano"
provider = "openai"
